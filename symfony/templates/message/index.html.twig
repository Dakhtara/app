{% extends 'message/base.html.twig' %}

{% block content %}

    <div class="h3">{% block title %}{{ message.communication.body }}{% endblock %}</div>

    <hr/><br/>

    {% for choice in message.communication.choices %}

        {% if not message.answerByChoice(choice) %}

            {# Volunteer is able to answer #}

            <div class="h3 text-center">

                <a class="respond btn btn-primary"
                   style="width: 100%;white-space: normal;"
                   href="{{ path('message_action', {code: code, action: choice.code }) }}">
                    <span class="h4">{{ choice.label }}</span>
                </a>

            </div>

        {% else %}

            {# Volunteer already answered, he can cancel though #}

            <table style="width: 100%;">
                <tr>
                    <td style="width: 80%;" align="center" valign="middle" class="bg-danger">
                        <div class="text-white">
                            <span class="h4">{{ choice.label }}</span>
                            <br/>
                            <span class="font-italic">{{ message.answerByChoice(choice).receivedAt|date('d/m/Y H:i:s') }}</span>
                        </div>
                    </td>
                    <td style="width: 20%;" align="center" valign="middle">
                        <a class="respond btn btn-light"
                           style="width: 100%;"
                           href="{{ path('message_cancel', {code: code, action: choice.code }) }}">
                            <span class="h4">‚ùå</span>
                        </a>
                    </td>
                </tr>
            </table>

        {% endif %}

        <br/>

    {% endfor %}

    <script type="text/javascript">

        $('.respond').click(function () {
            $('.respond').addClass('disabled');
        });

    </script>


{% endblock %}

